/*1337563818,169776069*/

if (window.CavalryLogger) { CavalryLogger.start_js(["s4thk"]); }

function UIAdmgrPageViewReport(a,b,c,d){this.reportParams=b;this.topDiv=$('contentArea');this.date_picker=d;this.date_picker.setCallback(this._dateChangeCallback.bind(this));this.summary_bar_container=DOM.scry(this.topDiv,'div.adreports_summary_bar')[0];this.table_container=DOM.find(this.topDiv,'div.adreports_data');this._initializeColumnHeaders(c);this._findButtons();}copy_properties(UIAdmgrPageViewReport,{DATA_ENDPOINT:'/ads/ajax/reports_get_data.php'});copy_properties(UIAdmgrPageViewReport.prototype,{_dateChangeCallback:function(a,b,c,d,e){new BakerAction(null,'input;ads:manage:reports;changeDate').log();if(b==d&&c==e){a.confirmSave(b,c);return;}var f=this.overrideDateParams(this.reportParams,b,c);this.oldStartText=d;this.oldEndText=e;new AsyncRequest().setURI(UIAdmgrPageViewReport.DATA_ENDPOINT).setData(f).setErrorHandler(function(g){a.confirmSave(this.oldStartText,this.oldEndText);}.bind(this)).setHandler(function(g){if(g.payload.err){a.confirmSave(this.oldStartText,this.oldEndText);Arbiter.inform(UIAdmgrHeaderMessaging.ARBITER_ERROR_MESSAGE,[g.payload.err]);return;}this.reportParams=f;if(this.table_container&&g.payload.table_html)DOM.setContent(this.table_container,HTML(g.payload.table_html));if(this.summary_bar_container&&g.payload.summary_html)DOM.setContent(this.summary_bar_container,HTML(g.payload.summary_html));this.updateButtonLinks(b,c);this._initializeColumnHeaders(g.payload.columns);a.confirmSave(b,c);Arbiter.inform(UIAdmgrHeaderMessaging.ARBITER_ERROR_MESSAGE,g.payload.errors);}.bind(this)).setStatusElement('adreports_table_loading').send();a.confirmSave(b,c);},_initializeColumnHeaders:function(a){for(var b in a){var c=a[b],d=DOM.find(this.topDiv,'th#dtth_'+c.tableIndex);Event.listen(d,'click',this._columnHeaderClickCallback.bind(this,c.logName));}},_columnHeaderClickCallback:function(a){var b='input;ads:manage:reports:sort;'+a;new BakerAction(null,b).log();},_findButtons:function(){this.buttons=[];this.export_buttons=DOM.scry(this.topDiv,'a.exportReportButton');this.new_report_buttons=DOM.scry(this.topDiv,'a.newReportButton');this.schedule_buttons=DOM.scry(this.topDiv,'a.scheduleReportButton');this.buttons=this.buttons.concat(this.export_buttons);this.buttons=this.buttons.concat(this.new_report_buttons);this.buttons=this.buttons.concat(this.schedule_buttons);},updateButtonLinks:function(a,b){for(var c=0;c<this.buttons.length;c++){var d=new URI(this.buttons[c].href),e=d.getQueryData();d.setQueryData(this.overrideDateParams(e,a,b));this.buttons[c].href=d.toString();}},overrideDateParams:function(a,b,c){var d=a;if("0"===b){d.time_start=0;d.time_end=0;d.agg_time='lifetime';}else{d.time_start=null;d.time_end=null;}switch(d.agg_time){case 'daily':case 'custom':d.day_start_text_field=b;d.day_end_text_field=c;break;case 'weekly':d.week_start_text_field=b;d.week_end_text_field=c;break;case 'monthly':newStartFields=b.split('/');newEndFields=c.split('/');d.month_start_month=newStartFields[0];d.month_start_year=newStartFields[2];d.month_end_month=newEndFields[0];d.month_end_year=newEndFields[2];break;}return d;}});
function SortTable(a,b,c,d,e,f,g,h){copy_properties(this,{_table:a,_needsSwitch:false,_startRow:0,_sortColumnIndex:null,_firstRow:null,_defaultColumnId:c,_defaultDir:b?'down':'up',_comparisonColumn:[],_comparisonTransitions:{},_footerRows:d||0,_stripe:e||true,_stripeClass:f||'alt',_stripeInterval:g||2,_stripeOffset:h||0});this._init();return this;}copy_properties(SortTable,{tablesByID:{}});copy_properties(SortTable.prototype,{_numberRE:/^([+-]?[\d\.\,]+)\s*([KMBGT%]|us|ms|s|m|h|d|w|y|MB|GB|GiB|TB|PB|EB|YB|ZB|MiB\/sec|Mb\/s|Gb\/s|Tb\/s|\/sec)?\s*\(?(\s*[\d\.]+%?\s*)?\)?/,_sortTransitions:{down:'up',up:'down'},_arrowContent:{down:'&nbsp;&uarr;&nbsp',up:'&nbsp;&darr;&nbsp',down_changes:'&nbsp;&uarr;&divide;&nbsp',up_changes:'&nbsp;&darr;&divide;&nbsp'}});copy_properties(SortTable.prototype,{_init:function(){SortTable.tablesByID[this._table.id]=this;var a;for(var b=0;b<this._table.rows.length;b++){a=this._table.rows[b];if(CSS.hasClass(a,'title')){this._startRow=b+1;a=null;continue;}else break;}if(!a)return;var c=this._sortTransitions[this._defaultDir],d=this._defaultDir+'_changes',e=c+'_changes';this._comparisonTransitions[d]=e;this._comparisonTransitions[e]=this._defaultDir;this._comparisonTransitions[this._defaultDir]=c;this._comparisonTransitions[c]=d;this._firstRow=a;for(var b=0;b<a.cells.length;b++){var f=a.cells[b];this._comparisonColumn[b]=CSS.hasClass(f,'comparison');if(CSS.hasClass(f,'sortable')){var g=this._defaultDir;if(this._comparisonColumn[b])g+='_changes';f.appendChild(this._makeArrow(g));CSS.addClass(f,'sortheader');Event.listen(f,'click',bind(this,this._resort,b));}}if(this._defaultColumnId!=null)this._resort(this._defaultColumnId);for(var h=this._startRow+1;h<this._table.rows.length;h++)if(CSS.hasClass(this._table.rows[h],'sticktotop')){this._startRow=h;continue;}else break;},_resort:function(a){this._needsSwitch=false;var b=DOM.scry(this._firstRow,'span.sortarrow'),c=b[a],d=1+this._startRow,e='';while(e==''&&d<this._table.rows.length){e=DOM.getText(this._table.rows[d].cells[a]);e=e.replace(/,/g,'');d++;}if(e=='')return;var f=c.getAttribute('sortdir'),g=bind(this,this._sortCaseinsensitive),h=this._table.rows[this._startRow+1];if(h.cells[a].getAttribute('data-raw')){g=bind(this,this._sortDataRaw);}else if(e.match(/^\d\d[\/-]\d\d[\/-]\d\d\d\d/)){g=bind(this,this._sortDate1);}else if(e.match(/^\d\d[\/-]\d\d[\/-]\d\d/)){g=bind(this,this._sortDate2);}else if(e.match(/^\d\d[\/-]\d\d \d\d?:\d\d [ap]m/)){g=bind(this,this._sortDate3);}else if(e.match(/^\d\d\d\d[\/\-]\d\d[\/\-]\d\d/)){g=bind(this,this._sortDate4);}else if(e.match(/^[\xa3$]/)){g=bind(this,this._sortCurrency);}else if(e.match(this._numberRE)){if(f=='up_changes'||f=='down_changes'){g=bind(this,this._sortNumericChanges);}else g=bind(this,this._sortNumeric);}else if(!isNaN(Date.parse(e)))g=bind(this,this._sortDate4);var i=[],j=[],k=this._startRow+1;for(var l=k;l<this._table.rows.length;l++)if(l<this._table.rows.length-this._footerRows){i[l-k]=this._table.rows[l];}else{var m=l-(this._table.rows.length-this._footerRows);j[m]=this._table.rows[l];}this._sortColumnIndex=a;i=this._stableQuickSort(i,g);if(f=='down'||f=='down_changes')i.reverse();var n=null;if(this._comparisonColumn[a]){n=this._comparisonTransitions[f];}else n=this._sortTransitions[f];this._setArrow(c,n);for(var o=0;o<b.length;o++)CSS.addClass(b[o],'invisible');CSS.removeClass(c,'invisible');var p;for(o=0;o<i.length;o++){p=this._stripe&&((o+this._stripeOffset)%Math.max(1,this._stripeInterval)===0);if(p){CSS.addClass(i[o],this._stripeClass);}else CSS.removeClass(i[o],this._stripeClass);this._table.tBodies[0].appendChild(i[o]);}for(o=0;o<this._footerRows;o++)this._table.tBodies[0].appendChild(j[o]);},_stableQuickSort:function(a,b){if(a.length<=1)return a;var c=a[0];a.remove(c);var d=[],e=[];for(var f=0;f<a.length;f++)if(b(a[f],c)<0){d.push(a[f]);}else e.push(a[f]);return [].concat(this._stableQuickSort(d,b),c,this._stableQuickSort(e,b));},_makeArrow:function(a){var b=$N('span',{className:'sortarrow invisible'},'');b.setAttribute('sortdir',a);return b;},_setArrow:function(a,b){var c=a.getAttribute('sortdir');DOM.setContent(a,HTML(this._arrowContent[c]));a.setAttribute('sortdir',b);},getSortColumnIndex:function(){return this._sortColumnIndex;},_sortDate1:function(a,b){var c=DOM.getText(a.cells[this._sortColumnIndex]),d=DOM.getText(b.cells[this._sortColumnIndex]),e=c.substr(6,4)+c.substr(0,2)+c.substr(3,2)+c.substr(10),f=d.substr(6,4)+d.substr(0,2)+d.substr(3,2)+d.substr(10);if(e==f)return 0;if(e<f)return -1;return 1;},_sortDate2:function(a,b){var c=DOM.getText(a.cells[this._sortColumnIndex]),d=DOM.getText(b.cells[this._sortColumnIndex]),e=c.substr(6,2);if(parseInt(e)<50){e='20'+e;}else e='19'+e;var f=e+c.substr(0,2)+c.substr(3,2)+c.substr(8);e=d.substr(6,2);if(parseInt(e)<50){e='20'+e;}else e='19'+e;var g=e+d.substr(0,2)+d.substr(3,2)+d.substr(8);if(f==g)return 0;if(f<g)return -1;return 1;},_sortDate3:function(a,b){var c=DOM.getText(a.cells[this._sortColumnIndex]),d=DOM.getText(b.cells[this._sortColumnIndex]),e=c.match(/^(\d\d)[\/-](\d\d) (\d\d?):(\d\d) ([ap]m)/),f=d.match(/^(\d\d)[\/-](\d\d) (\d\d?):(\d\d) ([ap]m)/),g=e[1]+e[2],h=f[1]+f[2];if(g<h)return -1;if(g>h)return 1;var i=(parseInt(e[3])+(e[5]=='pm'?12:0))*60+parseInt(e[4]),j=(parseInt(f[3])+(f[5]=='pm'?12:0))*60+parseInt(f[4]);if(i==j)return 0;if(i<j)return -1;return 1;},_sortDate4:function(a,b){var c=DOM.getText(a.cells[this._sortColumnIndex]),d=DOM.getText(b.cells[this._sortColumnIndex]),e=Date.parse(c),f=Date.parse(d);if(e==f)return 0;if(e<f)return -1;return 1;},_sortCurrency:function(a,b){var c=DOM.getText(a.cells[this._sortColumnIndex]).replace(/[^0-9.]/g,''),d=DOM.getText(b.cells[this._sortColumnIndex]).replace(/[^0-9.]/g,'');return parseFloat(c)-parseFloat(d);},_getCountValue:function(a){a=a.replace(/,/g,'');count_re=this._numberRE;match=count_re.exec(a);if(!match)return null;value=parseFloat(match[1]);switch(match[2]){case 'YB':return value*1048576*1048576*1048576*1048576;case 'ZB':return value*1048576*1048576*1048576*1024;case 'EB':return value*1048576*1048576*1048576;case 'PB':return value*1048576*1048576*1024;case 'T':return value*1e+06*1e+06;case 'B':case 'G':return value*1e+06*1000;case 'TB':case 'Tb/s':return value*1048576*1048576;case 'M':case 's':return value*1e+06;case 'GB':case 'Gb/s':case 'GiB':return value*1048576*1024;case 'K':case 'ms':return value*1000;case 'MB':case 'Mb/s':case 'MiB/sec':return value*1048576;case 'm':return value*1e+06*60;case 'h':return value*1e+06*3600;case 'd':return value*1e+06*86400;case 'w':return value*1e+06*86400*7;case 'y':return value*1e+06*86400*7*52;case 'us':return value;default:return value;}},_sortNumeric:function(a,b){var c=this._getCountValue(DOM.getText(a.cells[this._sortColumnIndex]));if(isNaN(c))c=0;var d=this._getCountValue(DOM.getText(b.cells[this._sortColumnIndex]));if(isNaN(d))d=0;return c-d;},_getChangeRatio:function(a){var b=null,c=null,d=DOM.scry(a,'.pri');if(d.length>0){b=this._getCountValue(DOM.getText(d[0]));if(isNaN(b))b=0;}else b=0;var e=DOM.scry(a,'.sec');if(e.length>0){c=this._getCountValue(DOM.getText(e[0]));if(isNaN(c))c=0;}else c=0;return Math.abs(c-b);},_sortNumericChanges:function(a,b){var c=this._getChangeRatio(a.cells[this._sortColumnIndex]),d=this._getChangeRatio(b.cells[this._sortColumnIndex]);return (c-d);},_ternaryCompare:function(a,b){if(a==b)return 0;if(a<b)return -1;return 1;},_sortCaseinsensitive:function(a,b){var c=DOM.getText(a.cells[this._sortColumnIndex]).toLowerCase(),d=DOM.getText(b.cells[this._sortColumnIndex]).toLowerCase();return this._ternaryCompare(c,d);},_isNumber:function(a){return !isNaN(parseFloat(a))&&isFinite(a);},_sortDataRaw:function(a,b){var c=a.cells[this._sortColumnIndex].getAttribute('data-raw'),d=b.cells[this._sortColumnIndex].getAttribute('data-raw');if(!(this._isNumber(c)&&this._isNumber(d)))return this._ternaryCompare(c,d);c=parseFloat(c);d=parseFloat(d);return (c-d);}});function SortTable_initAll(){if(window.sortTableInitialized)return;window.sortTableInitialized=true;tables=DOM.scry(document,'table.sortable');for(var a=0;a<tables.length;a++)new SortTable(tables[a]);}
function ToolTips(){copy_properties(this,{tipBox:$N('div'),tipInner:$N('div'),_showTimer:null});CSS.addClass(this.tipBox,'tooltip');CSS.addClass(this.tipInner,'tooltip_inner');this.tipBox.appendChild(this.tipInner);DOM.getRootElement().appendChild(this.tipBox);}ToolTips.TOP_CENTER={orientClassName:'tooltip_top_center'};ToolTips.RIGHT_CENTER={orientClassName:'tooltip_right_center'};ToolTips.BOTTOM_CENTER={orientClassName:'tooltip_bottom_center'};ToolTips.LEFT_CENTER={orientClassName:'tooltip_left_center'};ToolTips.DEFAULT=ToolTips.TOP_CENTER;copy_properties(ToolTips.prototype,{show:function(event){var a=$E(event).getTarget(),b=DataStore.get(a,'tooltip',{}).delay||0;if(!b){this._show(a);}else if(!this._showTimer)this._showTimer=this._show.bind(this,a).defer(b);},_show:function(a){var b=DataStore.get(a,'tooltip');if(b&&b.tip){DOM.setContent(this.tipInner,HTML(b.tip));CSS.setClass(this.tipBox,'tooltip');if(b.className)CSS.addClass(this.tipBox,b.className);this.tipBox.style.display='block';this.tipBox.style.visibility='hidden';this.tipBox.style.position='absolute';this.tipBox.style.zIndex='252';orientation=b.orientation||ToolTips.DEFAULT;var c=Vector2.getElementPosition(a),d=Vector2.getElementDimensions(this.tipBox),e=Vector2.getElementDimensions(a);switch(orientation){case ToolTips.RIGHT_CENTER:c=c.add(e.x+3,(e.y-d.y)/2);break;case ToolTips.TOP_CENTER:c=c.add((e.x-d.x)/2,-d.y-3);break;case ToolTips.LEFT_CENTER:c=c.add(-d.x-7,(e.y-d.y)/2);break;case ToolTips.BOTTOM_CENTER:c=c.add((e.x-d.x)/2,e.y+3);break;default:throw new Error('Unknown tooltip orientation: '+orientation);}CSS.addClass(this.tipBox,orientation.orientClassName);this.tipBox.style.visibility='visible';if(b.offset)c=c.sub(b.offset);c.setElementPosition(this.tipBox);(function(){Rect.getElementBounds(this.tipBox).boundWithin(Rect.getViewportBounds()).getPositionVector().setElementPosition(this.tipBox);}).bind(this).defer();}else this.hide();return this;},hide:function(event){if(this._showTimer){clearTimeout(this._showTimer);this._showTimer=null;}this.tipBox.style.display='';return this;}});copy_properties(ToolTips,{instance:null,getInstance:function(){return ToolTips.instance||(ToolTips.instance=new ToolTips());},setTips:function(a,b,c,d){for(var e in a)ToolTips.setTip(e,a[e],b,c,d);return ToolTips;},setTip:function(a,b,c,d,e){var f=ge(a);if(f){var g=ToolTips.getInstance(),h=g.show.bind(g),i=g.hide.bind(g);DataStore.set(f,'tooltip',{tip:b,orientation:c,delay:d,offset:e});Event.listen(f,'mouseover',h);Event.listen(f,'mouseout',i);}return ToolTips;},configureTip:function(a,b,c){switch(b){case 'orientation':case 'delay':case 'tip':case 'className':a=ge(a);if(a){var d=DataStore.get(a,'tooltip');d[b]=c;DataStore.set(a,'tooltip',d);}return ToolTips;break;}throw new TypeError('Invalid property, consult documentation.');}});
__d("TypeaheadExactMatchFirst",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._typeahead=i;}g(h.prototype,{_subscription:null,enable:function(){var i=this._typeahead.getView();this._subscription=i.subscribe('beforeRender',function(j,k){var l=false;k.results.forEach(function(n,o){if(n.text===k.value){l=o;return;}});if(l){var m=k.results.splice(l,1);k.results.unshift(m[0]);}});},disable:function(){var i=this._typeahead.getView();i.unsubscribe(this._subscription);this._subscription=null;}});e.exports=h;});
__d("legacy:ExactMatchFirstTypeaheadBehavior",["TypeaheadExactMatchFirst"],function(a,b,c,d){var e=b('TypeaheadExactMatchFirst');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.ExactMatchFirstTypeahead=function(f){f.enableBehavior(e);};},3);
function DevsiteTaskCreatePageController(){}copy_properties(DevsiteTaskCreatePageController,{form:null,alertBox:null,indicator:null,is_dialog:null,init:function(a,b,c,d){this.form=a;this.alertBox=b;this.indicator=c;this.is_dialog=d;},_handleResponse:function(a){CSS.hide(this.indicator);if(a.error_message){var b=null;if(a.error_details.length){var c=[];for(var d=0;d<a.error_details.length;++d)c.push($N('li',null,a.error_details[d]));b=$N('ul',{style:{'text-align':'left'}},c);}DOM.setContent(this.alertBox,$N('div',null,[$N('b',null,a.error_message),b]));CSS.show(this.alertBox);Form.setDisabled(this.form.getRoot(),false);}else if(this.is_dialog){Dialog.getCurrent().hide();window.location.reload(true);}else goURI(new URI().setPath('/bugs/'+a.task_id));return false;},onSubmit:function(){this.form.getRoot().submit.click();if(!this.is_dialog)window.scrollTo(0,0);CSS.hide(this.alertBox);CSS.show(this.indicator);Form.setDisabled(this.form.getRoot(),true);return false;}});
function DevsiteTaskDetailPageController(){}copy_properties(DevsiteTaskDetailPageController,{browseDiv:null,init:function(a){if(!a)return;this.browseDiv=a;KeyEventController.registerKey('LEFT',this.goPrev.bind(this));KeyEventController.registerKey('k',this.goPrev.bind(this));KeyEventController.registerKey('RIGHT',this.goNext.bind(this));KeyEventController.registerKey('j',this.goNext.bind(this));},goPrev:function(){prev_button=DOM.find(this.browseDiv,'.prev');if(prev_button.href)goURI(prev_button.href);},goNext:function(){next_button=DOM.find(this.browseDiv,'.next');if(next_button.href)goURI(next_button.href);}});
__d("legacy:KeyEventController",["KeyEventController"],function(a,b,c,d){a.KeyEventController=b('KeyEventController');},3);
__d("legacy:drag",["Draggable","Droppable"],function(a,b,c,d){a.Draggable=b('Draggable');a.Droppable=b('Droppable');},3);
__d("FlipDirectionOnKeypress",["event-extensions","DOM","Input","Style"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Input'),i=b('Style');Event.listen(document.documentElement,'keyup',function(event){var j=event.getTarget();if(!g.isNodeOfType(j,['input','textarea']))return;if(g.isNodeOfType(j,'input')&&j.type=='password')return;if(j.getAttribute('data-prevent-auto-flip'))return;var k=h.getValue(j),l=(j.style&&j.style.direction);if(!l){var m=0,n=true;for(var o=0;o<k.length;o++){var p=k.charCodeAt(o);if(p>=48){if(n){n=false;m++;}if(p>=1470&&p<=1920){i.set(j,'direction','rtl');return;}if(m==5){i.set(j,'direction','ltr');return;}}else n=true;}}else if(k.length===0)i.set(j,'direction','');});});
var RouletteDuplicateController={duplicateSelectors:[],selected:0,init:function(a){if(a){this.selected=0;this.duplicateSelectors=[];KeyEventController.registerKey('UP',this.upHandler.bind(this),undefined,true);KeyEventController.registerKey('DOWN',this.downHandler.bind(this),undefined,true);KeyEventController.registerKey('LEFT',this.leftHandler.bind(this),undefined,true);KeyEventController.registerKey('RIGHT',this.rightHandler.bind(this),undefined,true);KeyEventController.registerKey('RETURN',this.returnHandler.bind(this),undefined,true);}else this.selected=-1;},registerSelector:function(a){this.duplicateSelectors.push(a);if(this.duplicateSelectors.length==this.selected+1)CSS.addClass(this.duplicateSelectors[this.selected].duplicateArea,"place_duplicate_entry_selected");},returnHandler:function(event,a){DOM.find(document,'#places_editor_save input').click();return false;},upHandler:function(event,a){if(this.duplicateSelectors.length===0)return true;CSS.removeClass(this.duplicateSelectors[this.selected].duplicateArea,"place_duplicate_entry_selected");this.selected=(this.selected-1+this.duplicateSelectors.length)%this.duplicateSelectors.length;CSS.addClass(this.duplicateSelectors[this.selected].duplicateArea,"place_duplicate_entry_selected");return false;},downHandler:function(event,a){if(this.duplicateSelectors.length===0)return true;CSS.removeClass(this.duplicateSelectors[this.selected].duplicateArea,"place_duplicate_entry_selected");this.selected=(this.selected+1)%this.duplicateSelectors.length;CSS.addClass(this.duplicateSelectors[this.selected].duplicateArea,"place_duplicate_entry_selected");return false;},leftHandler:function(event,a){if(this.duplicateSelectors.length===0)return true;this.duplicateSelectors[this.selected].onSelectDuplicate(event,a);return this.downHandler(event,a);},rightHandler:function(event,a){if(this.duplicateSelectors.length===0)return true;this.duplicateSelectors[this.selected].onSelectNotDuplicate(event,a);return this.downHandler(event,a);}};
var RouletteDuplicateControllerNew={init:function(){KeyEventController.registerKey('UP',this.upHandler.bind(this),undefined,true);KeyEventController.registerKey('DOWN',this.downHandler.bind(this),undefined,true);KeyEventController.registerKey('RETURN',this.returnHandler.bind(this),undefined,true);},returnHandler:function(event,a){DOM.find(document,'#places_editor_save input').click();return false;},upHandler:function(event,a){if(ge('isdup_no').checked){this.clickOption('isdup_yes');}else if(ge('isdup_notsure').checked)this.clickOption('isdup_no');return false;},downHandler:function(event,a){if(ge('isdup_yes').checked){this.clickOption('isdup_no');}else if(ge('isdup_no').checked)this.clickOption('isdup_notsure');return false;},clickOption:function(a){$(a).click();}};
__d("legacy:ProfileBrowserListView",["ProfileBrowserListView"],function(a,b,c,d){a.ProfileBrowserListView=b('ProfileBrowserListView');},3);
__d("PageSuggestEditLog",["AsyncRequest","Animation","HTML","URI","DOM","CSS","ge","$","PageSuggestEditLogConfig"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Animation'),i=b('HTML'),j=b('URI'),k=b('DOM'),l=b('CSS'),m=b('ge'),n=b('$'),o=null,p=[],q=0,r=0,s=0,t=null,u=null,v=c('PageSuggestEditLogConfig'),w={init:function(x){o=x;t=Math.min(v.insertInterval,v.updateInterval);w.update();w._schedulePoll();},changeEndpoint:function(x){if(v.endpoint===x)return;v.endpoint=x;p=[];r=0;s=0;w._poll();},changeCountry:function(x){return w.changeEndpoint(j(v.endpoint).addQueryData({country:x}));},_poll:function(){var x=Date.now(),y=x-r,z=x-s;if(p.length>0&&z>=v.insertInterval){w.insertStory(p.shift());}else if(y>=v.updateInterval)w.update();w._schedulePoll();},_schedulePoll:function(){clearTimeout(u);u=setTimeout(w._poll,t);},_handleResponse:function(x){var y=x.getPayload();if(y.stories)p=p.concat(y.stories);if(y.newest&&y.newest>q)q=y.newest;},update:function(){var x={edits_since:q};new g().setURI(v.endpoint).setReadOnly(true).setOption('retries',0).setData(x).setHandler(w._handleResponse).setFinallyHandler(w._poll).send();r=Date.now();},insertStory:function(x){if(!m("pageSuggestEditLog"))return;x=i.replaceJSONWrapper(x).getRootNode();l.hide(x);k.prependContent(n("pageSuggestEditLog"),x);h(x).from('height',0).to('height','auto').show().blind().ease(h.ease.both).duration(500).go();s=Date.now();}};e.exports=w;});
__d("PageSuggestEditLogFilter",["DOMEventListener","Parent","DOMQuery","CSS","PageSuggestEditLog"],function(a,b,c,d,e,f){var g=b('DOMEventListener'),h=b('Parent'),i=b('DOMQuery'),j=b('CSS'),k=b('PageSuggestEditLog'),l=null,m=null,n={init:function(o,p){m=o;l=g.add(m,'click',n.handleChangeFilter);var q=i.find(m,'a[data-country="'+p+'"]');j.addClass(q,'uiPillButtonSelected');k.changeCountry(p);},handleChangeFilter:function(o){var p=h.byTag(o.getTarget(),'a').getAttribute('data-country');i.scry(m,'a[data-country]').forEach(function(q){j.conditionClass(q,'uiPillButtonSelected',q.getAttribute('data-country')==p);});k.changeCountry(p);}};e.exports=n;});
function PlacesEditorController(){}copy_properties(PlacesEditorController.prototype,{init:function(a,b){this._map=a;this._pin=b;this._pinUpdateToken=Arbiter.subscribe('PlacesEditor/updatePins',this._onUpdatePins.bind(this));onleaveRegister(function(){this._pinUpdateToken.unsubscribe();});},_onUpdatePins:function(a,b){if(!this._map||!this._pin)return;var c={pins:this._getPins(b),clear_existing:true,set_view:true,view_settings:{offset:{x:250,y:0},sizeFactor:{width:3,height:1}}};this._map.inform('DynamicMap/updatePins',c,Arbiter.BEHAVIOR_PERSISTENT);},_getPins:function(a){var b={};for(var c in a){var d={};copy_properties(d,this._pin);for(var e in a[c])d[e]=a[c][e];b[c]=d;}return b;}});
function PlacesEditorRouletteSelector(){}copy_properties(PlacesEditorRouletteSelector.prototype,{init:function(a){this.selector=a;Selector.listen(a,'toggle',this.onToggle.bind(this));Selector.getSelectedOptions(a).forEach(function(b){this.setDisabled(b);}.bind(this));},onToggle:function(a){var b=null;a.option.className.split(' ').forEach(function(d){if(d.indexOf("places_editor")===0)b=d;});var c=false;Selector.getSelectedOptions(a.selector).forEach(function(d){if(d!==a.option)if(CSS.hasClass(d,b)){c=c||Selector.isOptionSelected(d);this.wasChecked=d;Selector.setSelected(a.selector,Selector.getOptionValue(d),false);}}.bind(this));if(!c){Selector.setSelected(a.selector,Selector.getOptionValue(a.option),true);}else{Selector.getOptions(a.selector).forEach(function(d){Selector.setOptionEnabled(d,false);});if(this.customCityOption&&this.customCityOption==a.option)this.selectCustomCity();}},setDisabled:function(a){link=DOM.find(a,'a');link.rel='ignore';link.href='#';link.onclick=null;a.onclick=null;},initCustomCity:function(a,b,c){this.customCityURL=b;this.customCityFlow=c;this.customCityOption=a;},selectCustomCity:function(){var a=new AsyncRequest().setReadOnly(true).setURI('/ajax/events/change_city.php'),b=new Dialog().setAsync(a).setHandler(this.onSetCustomCity.bind(this)).setCancelHandler(this.onCancelCustomCity.bind(this)).show();},onCancelCustomCity:function(){Selector.getOptions(this.selector).forEach(function(a){Selector.setOptionEnabled(a,true);});Selector.setSelected(this.selector,Selector.getOptionValue(this.wasChecked),true);Selector.setSelected(this.selector,Selector.getOptionValue(this.customCityOption),false);},onSetCustomCity:function(a){var b=new URI(this.customCityURL).addQueryData({flow:this.customCityFlow,seed:$('create_event_city_input').value});new AsyncRequest().setReadOnly(false).setRelativeTo(this.customCityOption).setStatusElement('place_editor_next_area').setURI(b).setMethod('POST').send();}});
function PlacesEditorHistoryMapController(){}copy_properties(PlacesEditorHistoryMapController.prototype,{init:function(a,b){this._map=a;this._pin=b;this._onPlaceAddedToken=Arbiter.subscribe('PlacesEditorHistory/onPlaceAdded',this._onPlaceAdded.bind(this));onleaveRegister(function(){this._onPlaceAddedToken.unsubscribe();});},_onPlaceAdded:function(a,b){if(!this._map||!this._pin)return;var c={pins:this._getPins(b),clear_existing:false,set_view:true};this._map.inform('DynamicMap/updatePins',c,Arbiter.BEHAVIOR_PERSISTENT);},_getPins:function(a){var b={};for(var c in a){var d={};copy_properties(d,this._pin);for(var e in a[c])d[e]=a[c][e];b[c]=d;}return b;}});
function PlacesEditorTips(){}copy_properties(PlacesEditorTips.prototype,{init:function(a,b,c){for(i=0;i<c.length;++i)Event.listen($(c[i]),'click',this.handleBookmarkAdd.bind(this,a,b));},handleBookmarkAdd:function(a,b){CSS.hide(a);Arbiter.inform(NavigationMessage.NAVIGATION_FAVORITE_UPDATE,{key:b,favorite:true},Arbiter.BEHAVIOR_PERSISTENT);}});
__d("PlacesEditorWelcomeSelector",["Arbiter","Parent","DOMQuery","URI","AsyncRequest"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Parent'),i=b('DOMQuery'),j=b('URI'),k=b('AsyncRequest'),l=null,m=null,n=null,o=null,p=null,q=null,r={init:function(s,t,u,v){l=s;m=t;p=u;q=v;if(n)n.unsubscribe();if(o)o.unsubscribe();n=g.subscribe('PlacesEditor/welcome/flow',r.setFlow);o=g.subscribe('PlacesEditor/welcome/module',r.setModule);},setFlow:function(s,t){p=t.flow;q=t.seed;},setModule:function(s,t){var u=j(m).addQueryData({module:t,flow:p,seed:q});new k(u).setStatusElement(i.find(l,"^.workarea")).send();}};e.exports=r;});